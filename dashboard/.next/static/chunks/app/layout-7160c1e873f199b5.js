(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6620:function(e,s,a){Promise.resolve().then(a.t.bind(a,8877,23)),Promise.resolve().then(a.bind(a,398)),Promise.resolve().then(a.bind(a,9204)),Promise.resolve().then(a.bind(a,9082)),Promise.resolve().then(a.bind(a,9512))},398:function(e,s,a){"use strict";a.d(s,{default:function(){return O}});var r=a(7437),t=a(6463),n=a(2265),o=a(495),i=a(6023),l=a(7592),d=a(2468),c=a(8165),u=a(7440);let m=i.fC,f=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,n.forwardRef((e,s)=>{let{className:a,inset:t,children:n,...o}=e;return(0,r.jsxs)(i.fF,{ref:s,className:(0,u.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",a),...o,children:[n,(0,r.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=i.fF.displayName,n.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(i.tu,{ref:s,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t})}).displayName=i.tu.displayName;let h=n.forwardRef((e,s)=>{let{className:a,sideOffset:t=4,...n}=e;return(0,r.jsx)(i.Uv,{children:(0,r.jsx)(i.VY,{ref:s,sideOffset:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});h.displayName=i.VY.displayName;let x=n.forwardRef((e,s)=>{let{className:a,inset:t,...n}=e;return(0,r.jsx)(i.ck,{ref:s,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",a),...n})});x.displayName=i.ck.displayName,n.forwardRef((e,s)=>{let{className:a,children:t,checked:n,...o}=e;return(0,r.jsxs)(i.oC,{ref:s,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),t]})}).displayName=i.oC.displayName,n.forwardRef((e,s)=>{let{className:a,children:t,...n}=e;return(0,r.jsxs)(i.Rk,{ref:s,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),t]})}).displayName=i.Rk.displayName;let p=n.forwardRef((e,s)=>{let{className:a,inset:t,...n}=e;return(0,r.jsx)(i.__,{ref:s,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...n})});p.displayName=i.__.displayName;let g=n.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(i.Z0,{ref:s,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...t})});g.displayName=i.Z0.displayName;var v=a(4232);let w=n.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(v.fC,{ref:s,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});w.displayName=v.fC.displayName;let j=n.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(v.Ee,{ref:s,className:(0,u.cn)("aspect-square h-full w-full",a),...t})});j.displayName=v.Ee.displayName;let b=n.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(v.NY,{ref:s,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});b.displayName=v.NY.displayName;var N=a(4693),y=a(500),k=a(2421),C=a(2022),Z=a(4258),z=a(6600),R=a(9687),A=a(9896);function S(e){var s,a;let{user:i,onLogout:l}=e,d=(0,t.useRouter)(),[c,u]=(0,n.useState)(!1);return(0,r.jsxs)(m,{open:c,onOpenChange:u,children:[(0,r.jsx)(f,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"ghost",className:"flex items-center space-x-3 px-3 py-2 h-auto hover:bg-accent/50 transition-colors duration-200",children:[(0,r.jsxs)(w,{className:"h-8 w-8",children:[(0,r.jsx)(j,{src:"",alt:i.name||i.email}),(0,r.jsx)(b,{className:"bg-primary text-primary-foreground text-sm font-medium",children:(s=i.name,a=i.email,s?s.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):a?a.slice(0,2).toUpperCase():"U")})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start space-y-0.5",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-foreground",children:i.name||i.email}),i.role&&(0,r.jsxs)(N.C,{variant:(e=>{switch(null==e?void 0:e.toLowerCase()){case"admin":return"default";case"manager":default:return"secondary";case"viewer":return"outline"}})(i.role.name),className:"text-xs px-1.5 py-0.5 h-auto",children:["admin"===i.role.name&&(0,r.jsx)(y.Z,{className:"h-2.5 w-2.5 mr-1"}),(0,r.jsx)("span",{className:"capitalize",children:i.role.name})]})]}),(0,r.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"})]})}),(0,r.jsxs)(h,{align:"end",className:"w-56",children:[(0,r.jsx)(p,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:i.name||i.email}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:i.email})]})}),(0,r.jsx)(g,{}),(0,r.jsxs)(x,{onClick:()=>d.push("/profile"),className:"cursor-pointer",children:[(0,r.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Profile"})]}),(0,r.jsxs)(x,{onClick:()=>d.push("/settings"),className:"cursor-pointer",children:[(0,r.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Settings"})]}),(0,r.jsxs)(x,{onClick:()=>d.push("/notifications"),className:"cursor-pointer",children:[(0,r.jsx)(z.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Notifications"})]}),(0,r.jsxs)(x,{onClick:()=>d.push("/help"),className:"cursor-pointer",children:[(0,r.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Help & Support"})]}),(0,r.jsx)(g,{}),(0,r.jsxs)(x,{onClick:l,className:"cursor-pointer text-red-600 focus:text-red-600",children:[(0,r.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Log out"})]})]})]})}var M=a(8296),U=a(2699),V=a(9512);function _(){let{setTheme:e}=(0,V.F)();return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",size:"icon",className:"h-9 w-9",children:[(0,r.jsx)(M.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(U.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,r.jsxs)(h,{align:"end",children:[(0,r.jsxs)(x,{onClick:()=>e("light"),children:[(0,r.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Light"]}),(0,r.jsxs)(x,{onClick:()=>e("dark"),children:[(0,r.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Dark"]}),(0,r.jsxs)(x,{onClick:()=>e("system"),children:[(0,r.jsx)("div",{className:"mr-2 h-4 w-4 rounded-full border border-current"}),"System"]})]})]})}var L=a(3274),E=a(7905),P=a(3267);function O(){let[e,s]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0),l=(0,t.useRouter)();(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let a=await e.json();s(a)}else s(null)}catch(e){console.error("Auth check failed:",e),s(null)}finally{i(!1)}}()},[]);let d=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),s(null),l.push("/login"),l.refresh()}catch(e){console.error("Logout failed:",e)}};return a?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(L.Z,{className:"h-4 w-4 animate-spin"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Đang tải..."})]}):e?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(_,{}),(0,r.jsx)(S,{user:e,onLogout:d})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>l.push("/login"),className:"flex items-center space-x-2 hover:bg-accent/50 transition-all duration-200",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Login"})]}),(0,r.jsxs)(o.z,{size:"sm",onClick:()=>l.push("/register"),className:"flex items-center space-x-2 bg-primary hover:bg-primary/90 transition-all duration-200",children:[(0,r.jsx)(P.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Sign Up"})]})]})}},9204:function(e,s,a){"use strict";a.d(s,{default:function(){return p}});var r=a(7437),t=a(7416),n=a(7138),o=a(6463),i=a(7440),l=a(3852),d=a(4436),c=a(4817),u=a(2023),m=a(1240),f=a(3267),h=a(500),x=a(4207);function p(){let{canManageAdmins:e,canManageSites:s,canManageContent:a,canViewAuditLogs:p,canManageUsers:g}=(0,t.T)(),v=(0,o.usePathname)(),w=[{href:"/",label:"Dashboard",icon:l.Z,show:!0},{href:"/sites",label:"Sites",icon:d.Z,show:s},{href:"/keywords",label:"Keywords",icon:c.Z,show:s},{href:"/content-queue",label:"Content Queue",icon:u.Z,show:a},{href:"/users",label:"Users",icon:m.Z,show:g},{href:"/role-applications",label:"Role Applications",icon:f.Z,show:g},{href:"/admins",label:"Admins",icon:h.Z,show:e},{href:"/audit-logs",label:"Audit Logs",icon:x.Z,show:p}];return(0,r.jsx)("nav",{className:"space-y-2",children:w.map(e=>{if(!e.show)return null;let s=e.icon,a=v===e.href;return(0,r.jsxs)(n.default,{href:e.href,className:(0,i.cn)("group flex items-center space-x-3 rounded-xl px-3 py-3 text-sm font-medium transition-all duration-200","hover:bg-accent/50 hover:text-accent-foreground hover:shadow-sm",a?"bg-primary text-primary-foreground shadow-md border border-primary/20":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)("div",{className:(0,i.cn)("p-1.5 rounded-lg transition-all duration-200",a?"bg-primary-foreground/20":"group-hover:bg-accent/50"),children:(0,r.jsx)(s,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"flex-1",children:e.label}),a&&(0,r.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary-foreground"})]},e.href)})})}},9082:function(e,s,a){"use strict";var r=a(7437),t=a(8726);s.default=function(e){let{children:s}=e;return(0,r.jsxs)(r.Fragment,{children:[s,(0,r.jsx)(t.x7,{position:"top-right"})]})}},4693:function(e,s,a){"use strict";a.d(s,{C:function(){return i}});var r=a(7437);a(2265);var t=a(3027),n=a(7440);let o=(0,t.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:a}),s),...t})}},495:function(e,s,a){"use strict";a.d(s,{z:function(){return l}});var r=a(7437),t=a(2265),n=a(3027),o=a(7440);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative overflow-hidden group",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md btn-brutal",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md btn-brutal",outline:"border-2 border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50 shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground hover:shadow-sm",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl btn-brutal",glass:"glass text-foreground hover:bg-white/90 shadow-lg hover:shadow-xl"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-md px-4 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-11 w-11 rounded-lg",xl:"h-14 rounded-xl px-10 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef((e,s)=>{let{className:a,variant:t,size:n,loading:l,leftIcon:d,rightIcon:c,children:u,disabled:m,...f}=e;return(0,r.jsxs)("button",{className:(0,o.cn)(i({variant:t,size:n}),a),ref:s,disabled:m||l,...f,children:[l&&(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!l&&d&&(0,r.jsx)("span",{className:"mr-2",children:d}),u,!l&&c&&(0,r.jsx)("span",{className:"ml-2",children:c})]})});l.displayName="Button"},7440:function(e,s,a){"use strict";a.d(s,{cn:function(){return n}});var r=a(4839),t=a(6164);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.m6)((0,r.W)(s))}},7416:function(e,s,a){"use strict";a.d(s,{T:function(){return n}});var r=a(2265);let t=()=>{let[e,s]=(0,r.useState)(null),[a,t]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let a=await e.json();s(a)}else s(null)}catch(e){console.error("Auth check failed:",e),s(null)}finally{t(!1)}})()},[]),{user:e,isLoading:a}},n=()=>{let{user:e}=t();if(!e||!e.role)return{isAdmin:!1,isManager:!1,isViewer:!1,canManageAdmins:!1,canManageSites:!1,canManageContent:!1,canViewAuditLogs:!1,canManageUsers:!1,canViewDashboard:!1};let s=e.role.name;return{isAdmin:"admin"===s,isManager:"manager"===s,isViewer:"viewer"===s,canManageAdmins:"admin"===s,canManageUsers:"admin"===s,canManageSites:["admin","manager"].includes(s),canManageContent:["admin","manager"].includes(s),canViewAuditLogs:["admin","manager","viewer"].includes(s),canViewDashboard:["admin","manager","viewer"].includes(s)}}},8877:function(){}},function(e){e.O(0,[404,934,954,230,174,971,23,744],function(){return e(e.s=6620)}),_N_E=e.O()}]);
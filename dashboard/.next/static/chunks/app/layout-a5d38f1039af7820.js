(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3789:function(e,r,n){Promise.resolve().then(n.t.bind(n,8877,23)),Promise.resolve().then(n.bind(n,720)),Promise.resolve().then(n.bind(n,9204)),Promise.resolve().then(n.bind(n,9082))},720:function(e,r,n){"use strict";n.d(r,{default:function(){return f}});var t=n(7437),a=n(6463),s=n(2265),i=n(495),o=n(4693),l=n(3274),c=n(2022),d=n(500),u=n(9896),h=n(7905),m=n(3267);function f(){let[e,r]=(0,s.useState)(null),[n,f]=(0,s.useState)(!0),x=(0,a.useRouter)();(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let n=await e.json();r(n)}else r(null)}catch(e){console.error("Auth check failed:",e),r(null)}finally{f(!1)}}()},[]);let g=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),r(null),x.push("/login"),x.refresh()}catch(e){console.error("Logout failed:",e)}};return n?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Đang tải..."})]}):e?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20 border border-blue-200 dark:border-blue-800",children:(0,t.jsx)(c.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Welcome, "}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:e.name||e.email})]})]}),e.role&&(0,t.jsxs)(o.C,{variant:(e=>{switch(null==e?void 0:e.toLowerCase()){case"admin":return"default";case"manager":default:return"secondary";case"viewer":return"outline"}})(e.role.name),className:"flex items-center space-x-1.5 px-2.5 py-1",children:["admin"===e.role.name&&(0,t.jsx)(d.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"capitalize text-xs font-medium",children:e.role.name})]})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:g,className:"flex items-center space-x-2 hover:bg-destructive hover:text-destructive-foreground hover:border-destructive transition-all duration-200",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Logout"})]})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>x.push("/login"),className:"flex items-center space-x-2 hover:bg-accent/50 transition-all duration-200",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Login"})]}),(0,t.jsxs)(i.z,{size:"sm",onClick:()=>x.push("/register"),className:"flex items-center space-x-2 bg-primary hover:bg-primary/90 transition-all duration-200",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Sign Up"})]})]})}},9204:function(e,r,n){"use strict";n.d(r,{default:function(){return g}});var t=n(7437),a=n(7416),s=n(7138),i=n(6463),o=n(7440),l=n(3852),c=n(4436),d=n(4817),u=n(2023),h=n(1240),m=n(3267),f=n(500),x=n(4207);function g(){let{canManageAdmins:e,canManageSites:r,canManageContent:n,canViewAuditLogs:g,canManageUsers:v}=(0,a.T)(),p=(0,i.usePathname)(),b=[{href:"/",label:"Dashboard",icon:l.Z,show:!0},{href:"/sites",label:"Sites",icon:c.Z,show:r},{href:"/keywords",label:"Keywords",icon:d.Z,show:r},{href:"/content-queue",label:"Content Queue",icon:u.Z,show:n},{href:"/users",label:"Users",icon:h.Z,show:v},{href:"/role-applications",label:"Role Applications",icon:m.Z,show:v},{href:"/admins",label:"Admins",icon:f.Z,show:e},{href:"/audit-logs",label:"Audit Logs",icon:x.Z,show:g}];return(0,t.jsx)("nav",{className:"space-y-2",children:b.map(e=>{if(!e.show)return null;let r=e.icon,n=p===e.href;return(0,t.jsxs)(s.default,{href:e.href,className:(0,o.cn)("group flex items-center space-x-3 rounded-xl px-3 py-3 text-sm font-medium transition-all duration-200","hover:bg-accent/50 hover:text-accent-foreground hover:shadow-sm",n?"bg-primary text-primary-foreground shadow-md border border-primary/20":"text-muted-foreground hover:text-foreground"),children:[(0,t.jsx)("div",{className:(0,o.cn)("p-1.5 rounded-lg transition-all duration-200",n?"bg-primary-foreground/20":"group-hover:bg-accent/50"),children:(0,t.jsx)(r,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"flex-1",children:e.label}),n&&(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary-foreground"})]},e.href)})})}},9082:function(e,r,n){"use strict";var t=n(7437),a=n(8726);r.default=function(e){let{children:r}=e;return(0,t.jsxs)(t.Fragment,{children:[r,(0,t.jsx)(a.x7,{position:"top-right"})]})}},4693:function(e,r,n){"use strict";n.d(r,{C:function(){return o}});var t=n(7437);n(2265);var a=n(3027),s=n(7440);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:n,...a}=e;return(0,t.jsx)("div",{className:(0,s.cn)(i({variant:n}),r),...a})}},495:function(e,r,n){"use strict";n.d(r,{z:function(){return l}});var t=n(7437),a=n(2265),s=n(3027),i=n(7440);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative overflow-hidden group",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md btn-brutal",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md btn-brutal",outline:"border-2 border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50 shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground hover:shadow-sm",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl btn-brutal",glass:"glass text-foreground hover:bg-white/90 shadow-lg hover:shadow-xl"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-md px-4 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-11 w-11 rounded-lg",xl:"h-14 rounded-xl px-10 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:n,variant:a,size:s,loading:l,leftIcon:c,rightIcon:d,children:u,disabled:h,...m}=e;return(0,t.jsxs)("button",{className:(0,i.cn)(o({variant:a,size:s}),n),ref:r,disabled:h||l,...m,children:[l&&(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!l&&c&&(0,t.jsx)("span",{className:"mr-2",children:c}),u,!l&&d&&(0,t.jsx)("span",{className:"ml-2",children:d})]})});l.displayName="Button"},7440:function(e,r,n){"use strict";n.d(r,{cn:function(){return s}});var t=n(4839),a=n(6164);function s(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,a.m6)((0,t.W)(r))}},7416:function(e,r,n){"use strict";n.d(r,{T:function(){return s}});var t=n(2265);let a=()=>{let[e,r]=(0,t.useState)(null),[n,a]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let n=await e.json();r(n)}else r(null)}catch(e){console.error("Auth check failed:",e),r(null)}finally{a(!1)}})()},[]),{user:e,isLoading:n}},s=()=>{let{user:e}=a();if(!e||!e.role)return{isAdmin:!1,isManager:!1,isViewer:!1,canManageAdmins:!1,canManageSites:!1,canManageContent:!1,canViewAuditLogs:!1,canManageUsers:!1,canViewDashboard:!1};let r=e.role.name;return{isAdmin:"admin"===r,isManager:"manager"===r,isViewer:"viewer"===r,canManageAdmins:"admin"===r,canManageUsers:"admin"===r,canManageSites:["admin","manager"].includes(r),canManageContent:["admin","manager"].includes(r),canViewAuditLogs:["admin","manager","viewer"].includes(r),canViewDashboard:["admin","manager","viewer"].includes(r)}}},8877:function(){}},function(e){e.O(0,[404,934,878,971,23,744],function(){return e(e.s=3789)}),_N_E=e.O()}]);
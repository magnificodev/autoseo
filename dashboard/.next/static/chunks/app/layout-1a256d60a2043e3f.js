(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3789:function(e,r,n){Promise.resolve().then(n.t.bind(n,8877,23)),Promise.resolve().then(n.bind(n,720)),Promise.resolve().then(n.bind(n,9204)),Promise.resolve().then(n.bind(n,9082))},720:function(e,r,n){"use strict";n.d(r,{default:function(){return f}});var s=n(7437),t=n(6463),a=n(2265),i=n(495),o=n(4693),c=n(3274),l=n(2022),d=n(500),u=n(9896),h=n(7905),m=n(3267);function f(){let[e,r]=(0,a.useState)(null),[n,f]=(0,a.useState)(!0),x=(0,t.useRouter)();(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let n=await e.json();r(n)}else r(null)}catch(e){console.error("Auth check failed:",e),r(null)}finally{f(!1)}}()},[]);let g=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),r(null),x.push("/login"),x.refresh()}catch(e){console.error("Logout failed:",e)}};return n?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Đang tải..."})]}):e?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-full bg-primary/10",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 text-primary"})}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Xin ch\xe0o, "}),(0,s.jsx)("span",{className:"font-medium text-foreground",children:e.name||e.email})]})]}),e.role&&(0,s.jsxs)(o.C,{variant:(e=>{switch(null==e?void 0:e.toLowerCase()){case"admin":return"default";case"manager":default:return"secondary";case"viewer":return"outline"}})(e.role.name),className:"flex items-center space-x-1",children:["admin"===e.role.name&&(0,s.jsx)(d.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{className:"capitalize",children:e.role.name})]})]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:g,className:"flex items-center space-x-2 hover:bg-destructive hover:text-destructive-foreground hover:border-destructive",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Đăng xuất"})]})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>x.push("/login"),className:"flex items-center space-x-2",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Đăng nhập"})]}),(0,s.jsxs)(i.z,{size:"sm",onClick:()=>x.push("/register"),className:"flex items-center space-x-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Đăng k\xfd"})]})]})}},9204:function(e,r,n){"use strict";n.d(r,{default:function(){return g}});var s=n(7437),t=n(7416),a=n(7138),i=n(6463),o=n(7440),c=n(3852),l=n(4436),d=n(4817),u=n(2023),h=n(1240),m=n(3267),f=n(500),x=n(4207);function g(){let{canManageAdmins:e,canManageSites:r,canManageContent:n,canViewAuditLogs:g,canManageUsers:v}=(0,t.T)(),p=(0,i.usePathname)(),w=[{href:"/",label:"Dashboard",icon:c.Z,show:!0},{href:"/sites",label:"Sites",icon:l.Z,show:r},{href:"/keywords",label:"Keywords",icon:d.Z,show:r},{href:"/content-queue",label:"Content Queue",icon:u.Z,show:n},{href:"/users",label:"Users",icon:h.Z,show:v},{href:"/role-applications",label:"Role Applications",icon:m.Z,show:v},{href:"/admins",label:"Admins",icon:f.Z,show:e},{href:"/audit-logs",label:"Audit Logs",icon:x.Z,show:g}];return(0,s.jsx)("nav",{className:"space-y-1",children:w.map(e=>{if(!e.show)return null;let r=e.icon,n=p===e.href;return(0,s.jsxs)(a.default,{href:e.href,className:(0,o.cn)("flex items-center space-x-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200","hover:bg-accent hover:text-accent-foreground",n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(r,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.label})]},e.href)})})}},9082:function(e,r,n){"use strict";var s=n(7437),t=n(8726);r.default=function(e){let{children:r}=e;return(0,s.jsxs)(s.Fragment,{children:[r,(0,s.jsx)(t.x7,{position:"top-right"})]})}},4693:function(e,r,n){"use strict";n.d(r,{C:function(){return o}});var s=n(7437);n(2265);var t=n(3027),a=n(7440);let i=(0,t.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:n,...t}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:n}),r),...t})}},495:function(e,r,n){"use strict";n.d(r,{z:function(){return c}});var s=n(7437),t=n(2265),a=n(3027),i=n(7440);let o=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative overflow-hidden group",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md btn-brutal",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md btn-brutal",outline:"border-2 border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50 shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground hover:shadow-sm",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl btn-brutal",glass:"glass text-foreground hover:bg-white/90 shadow-lg hover:shadow-xl"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-md px-4 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-11 w-11 rounded-lg",xl:"h-14 rounded-xl px-10 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,r)=>{let{className:n,variant:t,size:a,loading:c,leftIcon:l,rightIcon:d,children:u,disabled:h,...m}=e;return(0,s.jsxs)("button",{className:(0,i.cn)(o({variant:t,size:a}),n),ref:r,disabled:h||c,...m,children:[c&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!c&&l&&(0,s.jsx)("span",{className:"mr-2",children:l}),u,!c&&d&&(0,s.jsx)("span",{className:"ml-2",children:d})]})});c.displayName="Button"},7440:function(e,r,n){"use strict";n.d(r,{cn:function(){return a}});var s=n(4839),t=n(6164);function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,t.m6)((0,s.W)(r))}},7416:function(e,r,n){"use strict";n.d(r,{T:function(){return a}});var s=n(2265);let t=()=>{let[e,r]=(0,s.useState)(null),[n,t]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let n=await e.json();r(n)}else r(null)}catch(e){console.error("Auth check failed:",e),r(null)}finally{t(!1)}})()},[]),{user:e,isLoading:n}},a=()=>{let{user:e}=t();if(!e||!e.role)return{isAdmin:!1,isManager:!1,isViewer:!1,canManageAdmins:!1,canManageSites:!1,canManageContent:!1,canViewAuditLogs:!1,canManageUsers:!1,canViewDashboard:!1};let r=e.role.name;return{isAdmin:"admin"===r,isManager:"manager"===r,isViewer:"viewer"===r,canManageAdmins:"admin"===r,canManageUsers:"admin"===r,canManageSites:["admin","manager"].includes(r),canManageContent:["admin","manager"].includes(r),canViewAuditLogs:["admin","manager","viewer"].includes(r),canViewDashboard:["admin","manager","viewer"].includes(r)}}},8877:function(){}},function(e){e.O(0,[404,934,878,971,23,744],function(){return e(e.s=3789)}),_N_E=e.O()}]);
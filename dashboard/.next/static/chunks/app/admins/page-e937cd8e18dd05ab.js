(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{1043:function(e,t,n){Promise.resolve().then(n.bind(n,811))},811:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(7437),r=n(2265);function a(){let[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null);async function d(e){if((e.headers.get("content-type")||"").includes("application/json"))return e.json();throw Error((await e.text()).slice(0,300))}async function u(){try{o(null);let e=await fetch("/api/admins/",{credentials:"include"});if(!e.ok)throw Error(await e.text());let n=await d(e);t(n)}catch(e){o(e.message||"Error")}}async function h(e){if(e.preventDefault(),n.trim()){l(!0),o(null);try{let e=await fetch("/api/admins/",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_id:Number(n)})});if(!e.ok)throw Error(await e.text());a(""),await u()}catch(e){o(e.message||"Error")}finally{l(!1)}}}async function f(e){l(!0),o(null);try{let t=await fetch("/api/admins/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok)throw Error(await t.text());await u()}catch(e){o(e.message||"Error")}finally{l(!1)}}return(0,r.useEffect)(()=>{u()},[]),(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsx)("h1",{children:"Telegram Admins"}),(0,i.jsxs)("form",{onSubmit:h,style:{marginTop:12,marginBottom:12},children:[(0,i.jsx)("input",{type:"number",value:n,onChange:e=>a(e.target.value),placeholder:"User ID",style:{padding:8,marginRight:8}}),(0,i.jsx)("button",{type:"submit",disabled:s,style:{padding:"8px 12px"},children:"Add"})]}),c&&(0,i.jsx)("p",{style:{color:"red"},children:c}),(0,i.jsx)("ul",{children:e.map(e=>(0,i.jsxs)("li",{style:{marginBottom:6},children:[(0,i.jsx)("span",{style:{marginRight:8},children:e.user_id}),(0,i.jsx)("button",{onClick:()=>f(e.user_id),disabled:s,children:"Remove"})]},e.user_id))})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1043)}),_N_E=e.O()}]);
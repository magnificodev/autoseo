(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3789:function(e,n,t){Promise.resolve().then(t.t.bind(t,8877,23)),Promise.resolve().then(t.bind(t,720)),Promise.resolve().then(t.bind(t,9204)),Promise.resolve().then(t.bind(t,9082))},720:function(e,n,t){"use strict";t.d(n,{default:function(){return l}});var a=t(7437),i=t(6463),r=t(2265),s=t(495);function l(){let[e,n]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),o=(0,i.useRouter)();(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();n(t)}else n(null)}catch(e){console.error("Auth check failed:",e),n(null)}finally{l(!1)}}()},[]);let u=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),n(null),o.push("/login"),o.refresh()}catch(e){console.error("Logout failed:",e)}};return t?(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Đang tải..."}):e?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Xin ch\xe0o, ",e.name||e.email,e.role&&(0,a.jsx)("span",{className:"ml-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e.role.name})]}),(0,a.jsx)(s.z,{variant:"secondary",size:"sm",onClick:u,children:"Đăng xuất"})]}):(0,a.jsx)(s.z,{variant:"secondary",size:"sm",onClick:()=>o.push("/login"),children:"Đăng nhập"})}},9204:function(e,n,t){"use strict";t.d(n,{default:function(){return o}});var a=t(7437),i=t(7416),r=t(7138),s=t(6463),l=t(7440);function o(){let{canManageAdmins:e,canManageSites:n,canManageContent:t,canViewAuditLogs:o,canManageUsers:u}=(0,i.T)(),c=(0,s.usePathname)();return(0,a.jsx)("nav",{className:"space-y-2 text-sm",children:[{href:"/sites",label:"Sites",show:n},{href:"/keywords",label:"Keywords",show:n},{href:"/content-queue",label:"Content Queue",show:t},{href:"/users",label:"Users",show:u},{href:"/admins",label:"Admins",show:e},{href:"/audit-logs",label:"Audit Logs",show:o}].map(e=>e.show?(0,a.jsx)(r.default,{href:e.href,className:(0,l.cn)("block rounded px-2 py-1 hover:bg-gray-100 transition-colors",c===e.href&&"bg-gray-100 font-medium"),children:e.label},e.href):null)})}},9082:function(e,n,t){"use strict";var a=t(7437),i=t(8726);n.default=function(e){let{children:n}=e;return(0,a.jsxs)(a.Fragment,{children:[n,(0,a.jsx)(i.x7,{position:"top-right"})]})}},495:function(e,n,t){"use strict";t.d(n,{z:function(){return o}});var a=t(7437),i=t(6800),r=t.n(i);t(2265);let s={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},l={primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:outline-blue-600",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:outline-gray-400",ghost:"bg-transparent text-gray-900 hover:bg-gray-50 focus-visible:outline-gray-300",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:outline-red-600",outline:"border border-gray-300 bg-transparent text-gray-900 hover:bg-gray-50 focus-visible:outline-gray-300"};function o(e){let{className:n,variant:t="primary",size:i="md",disabled:o,...u}=e;return(0,a.jsx)("button",{className:r()("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:opacity-50 disabled:pointer-events-none",s[i],l[t],n),disabled:o,...u})}},7440:function(e,n,t){"use strict";t.d(n,{cn:function(){return r}});var a=t(4839),i=t(6164);function r(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,i.m6)((0,a.W)(n))}},7416:function(e,n,t){"use strict";t.d(n,{T:function(){return r}});var a=t(2265);let i=()=>{let[e,n]=(0,a.useState)(null),[t,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();n(t)}else n(null)}catch(e){console.error("Auth check failed:",e),n(null)}finally{i(!1)}})()},[]),{user:e,isLoading:t}},r=()=>{let{user:e}=i();if(!e||!e.role)return{isAdmin:!1,isManager:!1,isViewer:!1,canManageAdmins:!1,canManageSites:!1,canManageContent:!1,canViewAuditLogs:!1,canManageUsers:!1,canViewDashboard:!1};let n=e.role.name;return{isAdmin:"admin"===n,isManager:"manager"===n,isViewer:"viewer"===n,canManageAdmins:"admin"===n,canManageUsers:"admin"===n,canManageSites:["admin","manager"].includes(n),canManageContent:["admin","manager"].includes(n),canViewAuditLogs:["admin","manager","viewer"].includes(n),canViewDashboard:["admin","manager","viewer"].includes(n)}}},8877:function(){}},function(e){e.O(0,[404,422,80,971,23,744],function(){return e(e.s=3789)}),_N_E=e.O()}]);
(()=>{var e={};e.id=577,e.ids=[577],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9822:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(7047),t(3119),t(5866);var a=t(3191),n=t(8716),r=t(7922),i=t.n(r),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["content-queue",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7047)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\content-queue\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3119)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\content-queue\\page.tsx"],u="/content-queue/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/content-queue/page",pathname:"/content-queue",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3408:(e,s,t)=>{Promise.resolve().then(t.bind(t,9374))},9374:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(326),n=t(7577),r=t.n(n),i=t(8399),l=t(567),c=t(772),d=t(2288),o=t(4432),u=t(5304),x=t(5940);let h=e=>fetch(e,{credentials:"include"}).then(async e=>{if(!e.ok)throw Error(await e.text());return e.json()}),p={pending:{variant:"secondary",label:"Chờ duyệt"},approved:{variant:"default",label:"Đ\xe3 duyệt"},rejected:{variant:"destructive",label:"Từ chối"},published:{variant:"outline",label:"Đ\xe3 xuất bản"}};function j(){let[e,s]=r().useState(1),[t,n]=r().useState(""),[j,m]=r().useState(""),g=new URLSearchParams({limit:String(10),page:String(e)});j.trim()&&g.set("q",j.trim()),t&&g.set("status",t);let{data:v,error:y,isLoading:b,mutate:f}=(0,i.ZP)(`/api/content-queue/?${g.toString()}`,h),N=async(e,s)=>{try{await fetch(`/api/content-queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:s})}),f()}catch(e){console.error("Failed to update status:",e)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.I,{placeholder:"T\xecm theo ti\xeau đề hoặc nội dung",value:j,onChange:e=>m(e.target.value)}),(0,a.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"",children:"Tất cả trạng th\xe1i"}),a.jsx("option",{value:"pending",children:"Chờ duyệt"}),a.jsx("option",{value:"approved",children:"Đ\xe3 duyệt"}),a.jsx("option",{value:"rejected",children:"Từ chối"}),a.jsx("option",{value:"published",children:"Đ\xe3 xuất bản"})]}),a.jsx(c.z,{onClick:()=>f(),className:"shrink-0",children:"L\xe0m mới"})]}),y&&a.jsx("div",{className:"text-red-600 text-sm",children:String(y.message||y)}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(x.iA,{children:[a.jsx(x.xD,{children:(0,a.jsxs)(x.SC,{children:[a.jsx(x.ss,{children:"ID"}),a.jsx(x.ss,{children:"Ti\xeau đề"}),a.jsx(x.ss,{children:"Site"}),a.jsx(x.ss,{children:"Trạng th\xe1i"}),a.jsx(x.ss,{children:"Ng\xe0y tạo"}),a.jsx(x.ss,{children:"Thao t\xe1c"})]})}),(0,a.jsxs)(x.RM,{children:[b&&a.jsx(x.SC,{children:a.jsx(x.pj,{colSpan:6,children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u.O,{className:"h-4 w-full"}),a.jsx(u.O,{className:"h-4 w-3/4"}),a.jsx(u.O,{className:"h-4 w-1/2"})]})})}),v?.length===0&&!b&&a.jsx(x.SC,{children:a.jsx(x.pj,{colSpan:6,className:"text-center text-gray-500",children:"Kh\xf4ng c\xf3 nội dung n\xe0o."})}),v?.map(e=>a.jsxs(x.SC,{children:[a.jsxs(x.pj,{className:"font-medium",children:["#",e.id]}),a.jsx(x.pj,{children:a.jsx("div",{className:"max-w-xs truncate",title:e.title,children:e.title})}),a.jsx(x.pj,{children:e.site_name}),a.jsx(x.pj,{children:a.jsx(l.C,{variant:p[e.status].variant,children:p[e.status].label})}),a.jsx(x.pj,{children:new Date(e.created_at).toLocaleDateString("vi-VN")}),a.jsx(x.pj,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(d.Vq,{children:[a.jsx(d.hg,{asChild:!0,children:a.jsx(c.z,{variant:"secondary",size:"sm",children:"Xem"})}),a.jsxs(d.cZ,{className:"max-w-2xl",children:[a.jsx(d.fK,{children:a.jsx(d.$N,{children:e.title})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nội dung"}),a.jsx("div",{className:"p-3 bg-gray-50 rounded-md max-h-60 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:e.content})})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(c.z,{variant:"secondary",children:"Đ\xf3ng"}),"pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsx(c.z,{variant:"danger",onClick:()=>N(e.id,"rejected"),children:"Từ chối"}),a.jsx(c.z,{onClick:()=>N(e.id,"approved"),children:"Duyệt"})]})]})]})]})]}),"pending"===e.status&&a.jsxs("div",{className:"flex gap-1",children:[a.jsx(c.z,{size:"sm",variant:"danger",onClick:()=>N(e.id,"rejected"),children:"Từ chối"}),a.jsx(c.z,{size:"sm",onClick:()=>N(e.id,"approved"),children:"Duyệt"})]})]})})]},e.id))]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(c.z,{variant:"secondary",onClick:function(){s(e=>Math.max(1,e-1))},disabled:1===e,children:"Trang trước"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Trang ",e]}),a.jsx(c.z,{variant:"secondary",onClick:function(){s(e=>e+1)},disabled:v&&v.length<10,children:"Trang sau"})]})]})}},7047:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var a=t(8570);let n=(0,a.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\content-queue\page.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\content-queue\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,246,582,838,77],()=>t(9822));module.exports=a})();
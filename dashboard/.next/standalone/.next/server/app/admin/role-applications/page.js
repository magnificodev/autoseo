(()=>{var e={};e.id=823,e.ids=[823],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4664:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(9144),t(3119),t(5866);var r=t(3191),s=t(8716),i=t(7922),o=t.n(i),l=t(5231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(a,n);let d=["",{children:["admin",{children:["role-applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9144)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\admin\\role-applications\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3119)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\admin\\role-applications\\page.tsx"],p="/admin/role-applications/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/role-applications/page",pathname:"/admin/role-applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4728:(e,a,t)=>{Promise.resolve().then(t.bind(t,9522))},9522:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(326),s=t(7577),i=t(567),o=t(772),l=t(2643),n=t(5940),d=t(7673);function c(){let[e,a]=(0,s.useState)([]),[t,c]=(0,s.useState)(!0),[p,x]=(0,s.useState)({}),m=async()=>{try{let e=await fetch("/api/role-applications/");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Error fetching applications:",e)}finally{c(!1)}},u=async e=>{let a=p[e];if(a)try{let t=await fetch(`/api/role-applications/${e}/review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok)x(a=>{let t={...a};return delete t[e],t}),m();else{let e=await t.json();alert(e.detail||"Failed to review application")}}catch(e){console.error("Error reviewing application:",e),alert("Failed to review application")}},f=e=>r.jsx(i.C,{variant:{pending:"secondary",approved:"default",rejected:"destructive"}[e]||"secondary",children:e.toUpperCase()});return t?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"text-center",children:"Loading..."})}):(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Role Applications"}),r.jsx(l.Zb,{children:(0,r.jsxs)(n.iA,{children:[r.jsx(n.xD,{children:(0,r.jsxs)(n.SC,{children:[r.jsx(n.ss,{children:"User"}),r.jsx(n.ss,{children:"Requested Role"}),r.jsx(n.ss,{children:"Reason"}),r.jsx(n.ss,{children:"Status"}),r.jsx(n.ss,{children:"Created"}),r.jsx(n.ss,{children:"Review"})]})}),r.jsx(n.RM,{children:e.map(e=>(0,r.jsxs)(n.SC,{children:[r.jsx(n.pj,{children:e.user_email}),r.jsx(n.pj,{children:r.jsx(i.C,{variant:"outline",children:e.requested_role.toUpperCase()})}),r.jsx(n.pj,{className:"max-w-xs truncate",children:e.reason}),r.jsx(n.pj,{children:f(e.status)}),r.jsx(n.pj,{children:new Date(e.created_at).toLocaleDateString()}),r.jsx(n.pj,{children:"pending"===e.status?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(o.z,{size:"sm",onClick:()=>x(a=>({...a,[e.id]:{...a[e.id],status:"approved"}})),children:"Approve"}),r.jsx(o.z,{size:"sm",variant:"destructive",onClick:()=>x(a=>({...a,[e.id]:{...a[e.id],status:"rejected"}})),children:"Reject"})]}),r.jsx(d.g,{placeholder:"Admin notes...",value:p[e.id]?.admin_notes||"",onChange:a=>x(t=>({...t,[e.id]:{...t[e.id],admin_notes:a.target.value}})),rows:2}),r.jsx(o.z,{size:"sm",onClick:()=>u(e.id),disabled:!p[e.id]?.status,children:"Submit Review"})]}):(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.admin_notes&&(0,r.jsxs)("div",{children:["Notes: ",e.admin_notes]}),e.reviewer_email&&(0,r.jsxs)("div",{children:["Reviewed by: ",e.reviewer_email]}),e.reviewed_at&&(0,r.jsxs)("div",{children:["Reviewed:"," ",new Date(e.reviewed_at).toLocaleDateString()]})]})})]},e.id))})]})})]})}},2643:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>l,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>n});var r=t(326),s=t(7577),i=t(7863);let o=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));o.displayName="Card";let l=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let n=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...a}));n.displayName="CardTitle";let d=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},5940:(e,a,t)=>{"use strict";t.d(a,{RM:()=>n,SC:()=>d,iA:()=>o,pj:()=>p,ss:()=>c,xD:()=>l});var r=t(326),s=t(7577),i=t(7863);let o=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...a})}));o.displayName="Table";let l=s.forwardRef(({className:e,...a},t)=>r.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let n=s.forwardRef(({className:e,...a},t)=>r.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...a}));n.displayName="TableBody",s.forwardRef(({className:e,...a},t)=>r.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=s.forwardRef(({className:e,...a},t)=>r.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...a},t)=>r.jsx("th",{ref:t,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a}));c.displayName="TableHead";let p=s.forwardRef(({className:e,...a},t)=>r.jsx("td",{ref:t,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a}));p.displayName="TableCell",s.forwardRef(({className:e,...a},t)=>r.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},7673:(e,a,t)=>{"use strict";t.d(a,{g:()=>o});var r=t(326),s=t(7577),i=t(7863);let o=s.forwardRef(({className:e,...a},t)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...a}));o.displayName="Textarea"},9144:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>o,__esModule:()=>i,default:()=>l});var r=t(8570);let s=(0,r.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\admin\role-applications\page.tsx`),{__esModule:i,$$typeof:o}=s;s.default;let l=(0,r.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\admin\role-applications\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[948,393,214],()=>t(4664));module.exports=r})();
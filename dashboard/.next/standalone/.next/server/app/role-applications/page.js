(()=>{var e={};e.id=370,e.ids=[370],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3787:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(6168),t(3119),t(5866);var s=t(3191),r=t(8716),l=t(7922),o=t.n(l),i=t(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(a,n);let d=["",{children:["role-applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6168)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\role-applications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3119)),"D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Workspace\\beesmart\\autoseo\\dashboard\\app\\role-applications\\page.tsx"],p="/role-applications/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/role-applications/page",pathname:"/role-applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1968:(e,a,t)=>{Promise.resolve().then(t.bind(t,4753))},4753:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(326),r=t(7577),l=t(567),o=t(772),i=t(2643),n=t(5940),d=t(7673);function c(){let[e,a]=(0,r.useState)([]),[t,c]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)({requested_role:"manager",reason:""}),[f,h]=(0,r.useState)({}),b=async()=>{try{let e=await fetch("/api/role-applications/my-applications");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Error fetching my applications:",e)}finally{c(!1)}},j=async e=>{e.preventDefault();try{let e=await fetch("/api/role-applications/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(e.ok)m(!1),u({requested_role:"manager",reason:""}),b();else{let a=await e.json();alert(a.detail||"Failed to submit application")}}catch(e){console.error("Error submitting application:",e),alert("Failed to submit application")}},g=async e=>{if(confirm("Are you sure you want to cancel this application?"))try{let a=await fetch(`/api/role-applications/${e}`,{method:"DELETE"});if(a.ok)b();else{let e=await a.json();alert(e.detail||"Failed to cancel application")}}catch(e){console.error("Error cancelling application:",e),alert("Failed to cancel application")}},y=e=>s.jsx(l.C,{variant:{pending:"secondary",approved:"default",rejected:"destructive"}[e]||"secondary",children:e.toUpperCase()});return t?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"text-center",children:"Loading..."})}):(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Role Applications"}),s.jsx(o.z,{onClick:()=>m(!p),children:"Apply for Role"})]}),p&&(0,s.jsxs)(i.Zb,{className:"mb-6 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Apply for Role"}),(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Requested Role"}),(0,s.jsxs)("select",{value:x.requested_role,onChange:e=>u(a=>({...a,requested_role:e.target.value})),className:"w-full p-2 border rounded",children:[s.jsx("option",{value:"manager",children:"Manager"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason"}),s.jsx(d.g,{value:x.reason,onChange:e=>u(a=>({...a,reason:e.target.value})),placeholder:"Explain why you want this role...",rows:4})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(o.z,{type:"submit",children:"Submit Application"}),s.jsx(o.z,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]}),s.jsx(i.Zb,{children:(0,s.jsxs)(n.iA,{children:[s.jsx(n.xD,{children:(0,s.jsxs)(n.SC,{children:[s.jsx(n.ss,{children:"User"}),s.jsx(n.ss,{children:"Requested Role"}),s.jsx(n.ss,{children:"Reason"}),s.jsx(n.ss,{children:"Status"}),s.jsx(n.ss,{children:"Created"}),s.jsx(n.ss,{children:"Actions"})]})}),s.jsx(n.RM,{children:e.map(e=>(0,s.jsxs)(n.SC,{children:[s.jsx(n.pj,{children:e.user_email}),s.jsx(n.pj,{children:s.jsx(l.C,{variant:"outline",children:e.requested_role.toUpperCase()})}),s.jsx(n.pj,{className:"max-w-xs truncate",children:e.reason}),s.jsx(n.pj,{children:y(e.status)}),s.jsx(n.pj,{children:new Date(e.created_at).toLocaleDateString()}),s.jsx(n.pj,{children:"pending"===e.status&&s.jsx("div",{className:"flex gap-2",children:s.jsx(o.z,{size:"sm",onClick:()=>g(e.id),children:"Cancel"})})})]},e.id))})]})})]})}},2643:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>i,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>n});var s=t(326),r=t(7577),l=t(7863);let o=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));o.displayName="Card";let i=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",e),...a}));n.displayName="CardTitle";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},5940:(e,a,t)=>{"use strict";t.d(a,{RM:()=>n,SC:()=>d,iA:()=>o,pj:()=>p,ss:()=>c,xD:()=>i});var s=t(326),r=t(7577),l=t(7863);let o=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",e),...a})}));o.displayName="Table";let i=r.forwardRef(({className:e,...a},t)=>s.jsx("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",e),...a}));i.displayName="TableHeader";let n=r.forwardRef(({className:e,...a},t)=>s.jsx("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...a}));n.displayName="TableBody",r.forwardRef(({className:e,...a},t)=>s.jsx("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a}));c.displayName="TableHead";let p=r.forwardRef(({className:e,...a},t)=>s.jsx("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a}));p.displayName="TableCell",r.forwardRef(({className:e,...a},t)=>s.jsx("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},7673:(e,a,t)=>{"use strict";t.d(a,{g:()=>o});var s=t(326),r=t(7577),l=t(7863);let o=r.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...a}));o.displayName="Textarea"},6168:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>o,__esModule:()=>l,default:()=>i});var s=t(8570);let r=(0,s.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\role-applications\page.tsx`),{__esModule:l,$$typeof:o}=r;r.default;let i=(0,s.createProxy)(String.raw`D:\Workspace\beesmart\autoseo\dashboard\app\role-applications\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[948,393,214],()=>t(3787));module.exports=s})();